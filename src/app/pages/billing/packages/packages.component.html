<div class="packages-container">
  <div class="header">
    <h3>Packages</h3>
  </div>

  <div class="package-info">
    <p>
      Active Package: {{ currentPackage }}
      {{ lastPayment?.stopped ? " (Deactivated)" : "" }}
      {{ status?.subscription === "trial" ? " (Trial)" : "" }}
    </p>
    <p>
      Monthly Payment:
      {{ currentPackage === "Business" ? "Ksh. 3,000/=" : "Ksh 0.00/==" }}
    </p>
  </div>

  <div class="packages-grid">
    <!-- Starter Package -->
    <div class="package-card" [class.active]="currentPackage === 'Starter'">
      <h4>Starter Package</h4>
      <ul>
        <li>Free branded domain</li>
        <li>Mobile-ready & easy to use</li>
        <li>Manage your product catalog</li>
        <li>Secure payment processing</li>
        <li>Streamlined checkout & orders</li>
        <li>Built-in SEO tools</li>
        <li>Sales analytics & insights</li>
        <li>Social media integration</li>
        <li>24/7 WhatsApp support</li>
      </ul>

      <button
        mat-raised-button
        color="primary"
        *ngIf="status?.subscription === 'trial'"
        (click)="openPaymentDialog(false)"
      >
        Purchase
      </button>
    </div>

    <!-- Business Package -->
    <div class="package-card" [class.active]="currentPackage === 'Business'">
      <h4>Business Package</h4>
      <ul>
        <li>Everything in Starter, plus:</li>
        <li>Unlimited products</li>
        <li>Advanced marketing tools</li>
        <li>Detailed product specs</li>
        <li>Customer reviews system</li>
        <li>FAQ management</li>
        <li>Showcase product USPs</li>
        <li>Product variant pricing</li>
        <li>Video-enhanced product pages</li>
        <li>One-click checkout</li>
      </ul>

      <ng-container *ngIf="status?.subscription !== 'trial'">
        <ng-container *ngIf="currentPackage === 'Business'">
          <button
            mat-raised-button
            color="primary"
            *ngIf="lastPayment?.stopped"
            (click)="activatePackage()"
          >
            Activate
          </button>
          <button
            mat-raised-button
            color="primary"
            *ngIf="!lastPayment?.stopped"
            (click)="deactivatePackage()"
          >
            De-activate
          </button>
        </ng-container>

        <ng-container *ngIf="currentPackage !== 'Business'">
          <span *ngIf="pending">Pending Approval</span>
          <button
            mat-raised-button
            color="primary"
            *ngIf="!pending"
            (click)="openPaymentDialog(true)"
          >
            Activate
          </button>
        </ng-container>
      </ng-container>

      <span *ngIf="status?.subscription === 'trial'" class="trial-message">
        * Purchase the starter package to be able to upgrade to business
      </span>
    </div>
  </div>
</div>
