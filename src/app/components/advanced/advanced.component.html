<div class="p-6">
  <!-- Loading State -->
  <div
    *ngIf="isInitializing"
    class="flex justify-center items-center min-h-[200px]"
  >
    <mat-spinner diameter="40"></mat-spinner>
  </div>

  <!-- Main Content -->
  <div *ngIf="!isInitializing" class="space-y-6">
    <!-- Social Media Credentials Card -->
    <mat-card class="bg-white shadow-lg w-full">
      <div class="flex items-center justify-between p-4 border-b">
        <h5 class="text-xl font-semibold">Social Media Credentials</h5>
        <p class="text-sm text-gray-600">
          Enter credentials to enable automated posting
        </p>
      </div>

      <div class="p-6 space-y-4">
        <!-- Facebook Page ID -->
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Facebook Page ID</mat-label>
          <input
            matInput
            [(ngModel)]="facebookPageId"
            placeholder="Enter your Facebook Page ID"
          />
          <mat-icon matSuffix>facebook</mat-icon>
        </mat-form-field>

        <!-- Instagram Business Account ID -->
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Instagram Business Account ID</mat-label>
          <input
            matInput
            [(ngModel)]="instagramAccountId"
            placeholder="Enter your Instagram Business Account ID"
          />
          <mat-icon matSuffix>photo_camera</mat-icon>
        </mat-form-field>

        <!-- Facebook Access Token -->
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Facebook Page Access Token</mat-label>
          <input
            matInput
            type="password"
            [(ngModel)]="facebookAccessToken"
            placeholder="Enter your Facebook Access Token"
          />
          <mat-icon matSuffix>vpn_key</mat-icon>
          <mat-hint>This token is also used for Instagram posting</mat-hint>
        </mat-form-field>

        <!-- Meta User Access Token -->
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Meta User Access Token</mat-label>
          <input
            matInput
            type="password"
            [(ngModel)]="metaUserAccessToken"
            placeholder="Enter your Meta User Access Token"
          />
          <mat-icon matSuffix>vpn_key</mat-icon>
          <mat-hint>Meta User Access Token for marketing API access</mat-hint>
        </mat-form-field>

        <!-- Facebook Ad Account ID -->
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Facebook Ad Account ID</mat-label>
          <input
            matInput
            [(ngModel)]="facebookAdAccountId"
            placeholder="Enter your Facebook Ad Account ID"
          />
          <mat-icon matSuffix>account_circle</mat-icon>
          <mat-hint>Facebook Ad Account ID for creating ads</mat-hint>
        </mat-form-field>

        <!-- Facebook Pixel ID -->
        <mat-form-field class="w-full" appearance="fill">
          <mat-label>Facebook Pixel ID</mat-label>
          <input
            matInput
            [(ngModel)]="facebookPixelId"
            placeholder="Enter your Facebook Pixel ID"
          />
          <mat-icon matSuffix>track_changes</mat-icon>
          <mat-hint>Facebook Pixel ID for tracking conversions</mat-hint>
        </mat-form-field>
      </div>

      <div class="p-6 border-t">
        <div class="flex justify-end space-x-2">
          <button
            mat-raised-button
            color="primary"
            (click)="updateCredentials()"
            [disabled]="isLoading || !hasCredentialChanges()"
          >
            <mat-icon *ngIf="isLoading">hourglass_empty</mat-icon>
            <mat-icon *ngIf="!isLoading">save</mat-icon>
            Save Credentials
          </button>
          <button
            mat-raised-button
            color="warn"
            (click)="cancelCredentialChanges()"
            [disabled]="!hasCredentialChanges()"
          >
            <mat-icon>close</mat-icon>
            Cancel
          </button>
        </div>
      </div>
    </mat-card>

    <!-- Help/Info Card -->
    <mat-card class="bg-blue-50 shadow-lg w-full">
      <div class="p-6">
        <h6 class="text-lg font-semibold text-blue-900 mb-4">
          <mat-icon class="align-middle">help_outline</mat-icon>
          How to Get Your Credentials
        </h6>
        <div class="space-y-3 text-sm text-blue-800">
          <div>
            <p class="font-medium">Facebook Page ID:</p>
            <p>
              Go to your Facebook Page → Settings → Page Info → Your Page ID
            </p>
          </div>
          <div>
            <p class="font-medium">Instagram Business Account ID:</p>
            <p>
              Use Facebook Graph API Explorer or Meta Business Suite to find
              your Instagram Business Account ID
            </p>
          </div>
          <div>
            <p class="font-medium">Access Token:</p>
            <p>
              Generate a long-lived access token from Meta for Developers portal
              with pages_manage_posts and instagram_basic permissions
            </p>
          </div>
        </div>
      </div>
    </mat-card>
  </div>
</div>

<!-- Snackbar for notifications -->
<mat-snack-bar-container></mat-snack-bar-container>
